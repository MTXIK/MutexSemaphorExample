# Бабуиноподобная Проблема Синхронизации

## Описание проекта

Данный проект реализует классическую задачу синхронизации "Проблема бабуинов" (Baboon Crossing Problem) двумя способами:

1. **Использование мьютексов и условных переменных (`mutex_baboon.c`)**
2. **Использование семафоров с `sem_open` (`semaphore_baboon.c`)**

Целью задачи является моделирование ситуации, в которой группа бабуинов пытается пересечь реку по канату с двух направлений: с запада на восток и с востока на запад. Для обеспечения безопасного и взаимно исключающего доступа к канату используются механизмы синхронизации.

## Структура проекта

```
.
├── Makefile
├── README.md
└── src
    ├── mutex_baboon.c
    └── semaphore_baboon.c
```

- `Makefile`: Скрипт для автоматической сборки проектов.
- `README.md`: Этот файл с описанием проекта.
- `src/`: Каталог, содержащий исходные коды.
  - `mutex_baboon.c`: Реализация задачи с использованием мьютексов и условных переменных.
  - `semaphore_baboon.c`: Реализация задачи с использованием семафоров.

## Требования

Для сборки и запуска проектов необходимы:

- **Компилятор GCC**: Для компиляции исходных кодов.
- **POSIX Threads (pthread)**: Для работы с потоками.
- **POSIX Semaphores**: Для работы с семафорами.
- **Make**: Для использования Makefile.

## Сборка проекта

В корневом каталоге проекта находится `Makefile`, который содержит инструкции для сборки обоих вариантов реализации.

### Инструкции по сборке

1. **Клонируйте репозиторий или скопируйте файлы проекта на ваш компьютер.**

2. **Перейдите в корневой каталог проекта:**

   ```bash
   cd путь/к/проекту
   ```

3. **Запустите команду `make` для сборки обоих проектов:**

   ```bash
   make
   ```

   Это создаст два исполняемых файла:
   
   - `mutex`: Реализация с использованием мьютексов и условных переменных.
   - `semaphore`: Реализация с использованием семафоров.

4. **Если вы хотите собрать только один из вариантов, используйте:**

   - **Только мьютекс версия:**

     ```bash
     make mutex
     ```

   - **Только семафор версия:**

     ```bash
     make semaphore
     ```

- **Цели:**
  - `all`: Сборка обоих проектов.
  - `mutex`: Сборка реализации с мьютексами.
  - `semaphore`: Сборка реализации с семафорами.
  - `clean`: Удаление скомпилированных исполняемых файлов.

## Запуск проекта

После успешной сборки вы можете запустить любую из двух версий программы.

### Запуск реализации с мьютексами

```bash
./mutex
```

### Запуск реализации с семафорами

```bash
./semaphore
```

## Описание работы программ

Обе программы моделируют ситуацию, где несколько потоков (бабуинов) пытаются одновременно войти в критическую секцию (канат для переправы через реку) с двух направлений: Запад (`W`) и Восток (`E`). Программы обеспечивают, чтобы одновременно на канате находились бабуины только в одном направлении, предотвращая столкновения и обеспечивая безопасную переправу.

### Основные механизмы синхронизации

1. **Мьютексы и условные переменные (`mutex_baboon.c`):**
   - Используются для защиты доступа к общим ресурсам.
   - Условные переменные позволяют потокам ожидать, пока не изменится условие для входа в критическую секцию.

2. **Семафоры (`semaphore_baboon.c`):**
   - Используются для реализации взаимного исключения и условных ожиданий.
   - Именованные семафоры (`sem_open`) позволяют синхронизировать потоки, используя системные семафоры.

### Пример вывода программы

```
Бабуин 1 пытается зайти в критическую секцию (Запад).
Бабуин 1 зашел в критическую секцию (Запад). Текущее количество: 1
Бабуин 2 пытается зайти в критическую секцию (Восток).
Бабуин 3 пытается зайти в критическую секцию (Запад).
...
Бабуин 1 вышел из критической секции (Запад). Текущее количество: 0
Бабуин 2 зашел в критическую секцию (Восток). Текущее количество: 1
...
```

## Очистка проекта

Для удаления скомпилированных исполняемых файлов используйте команду:

```bash
make clean
```

Это удалит файлы `mutex` и `semaphore` из корневого каталога проекта.

## Дополнительная информация

- **Обработка ошибок:** Программы содержат базовую обработку ошибок, такую как проверка успешности выделения памяти и создания потоков. В случае возникновения ошибок выводятся соответствующие сообщения.

- **Обработка сигналов:** В реализации с семафорами добавлена обработка сигналов (`SIGINT`, `SIGTERM`) для корректного завершения программы и очистки ресурсов (удаление именованных семафоров).

- **Задержки:** Используются задержки (`sleep` и `usleep`) для симуляции работы в критической секции и разнообразия порядка входа бабуинов.
